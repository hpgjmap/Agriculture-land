import{ds as y,g4 as S,ga as q,g6 as w,ge as f,gT as k,wL as I,g2 as p,gS as b,wM as R,g1 as X,h0 as Y,jY as d,jW as v,rb as D,jX as M,bD as $}from"./index-CtmyMuv4.js";class A{getOperatorType(){return 10003}supportsCurves(){return!0}accelerateGeometry(e,n,s){return!1}canAccelerateGeometry(e){return!1}executeMany(e,n,s,r){return new W(e,n,s,r)}execute(e,n,s,r){const u=new y([e]),c=new y([n]),o=this.executeMany(u,c,s,r).next();return o||S("null output"),o}}function z(t,e,n,s){const r=t.getDimension(),u=e.getDimension();if(r!==u)return r>u?t:e;if(t.isEmpty())return e;if(e.isEmpty())return t;const c=new f,o=new f,i=new f;t.queryEnvelope(c),e.queryEnvelope(o),i.setCoords({env2D:c}),i.mergeEnvelope2D(o);const m=k(n,i,!0),g=t.getGeometryType(),l=e.getGeometryType();return g===p.enumPoint&&l===p.enumPoint?L(t,e,m):g===p.enumPoint&&l===p.enumMultiPoint?P(e,t,m):g===p.enumMultiPoint&&l===p.enumPoint?P(t,e,m):I(t,e,n,s)}function L(t,e,n,s){const r=b(n),u=r*r,c=t.getXY(),o=e.getXY(),i=new R({vd:t.getDescription()});return X.sqrDistance(c,o)>u&&(i.add(t),i.add(e)),i}function P(t,e,n,s){const r=t.getImpl().getAttributeStreamRef(0),u=t.getPointCount(),c=e.getXY(),o=t.createInstance(),i=b(n),m=new f;if(t.queryEnvelope(m),m.inflateCoords(i,i),m.contains(c)){const g=i*i;let l=!1;const h=Y(u,!1);for(let a=0;a<u;a++){const T=r.read(2*a),O=r.read(2*a+1),x=T-c.x,G=O-c.y;x*x+G*G<=g&&(l=!0,h[a]=!0)}if(l)for(let a=0;a<u;a++)h[a]||o.addPoints(t,a,a+1);else o.addPoints(t,0,u),o.add(e)}else o.addPoints(t,0,u),o.add(e);return o}class W extends q{constructor(e,n,s,r){super(),this.m_progressTracker=r,this.m_index=-1,this.m_inputGeoms=e,this.m_spatialReference=s,this.m_rightGeom=n.next(),this.m_bEmpty=!this.m_rightGeom,w(this.m_rightGeom)}tock(){return!0}getRank(){return 1}next(){if(this.m_bEmpty)return null;const e=this.m_inputGeoms.next();return e?(w(e),this.m_index=this.m_inputGeoms.getGeometryID(),z(e,this.m_rightGeom,this.m_spatialReference,this.m_progressTracker)):null}getGeometryID(){return this.m_index}}const _=new A;function Z(t,e,n){return _.execute(t,e,n,null)}function B(t,e,n){const s=_.executeMany(new y(t),new y([e]),n,null);return Array.from(s)}function F(){return _.supportsCurves()}function j(t,e){const n=v(t);return M(Z(d(t),d(e),D(n)),n)}function C(t,e){const n=t.map(d),s=v(t);return B(n,d(e),D(s)).map(r=>M(r,s)).filter($)}const E=F(),J=Object.freeze(Object.defineProperty({__proto__:null,execute:j,executeMany:C,supportsCurves:E},Symbol.toStringTag,{value:"Module"})),K=Object.freeze(Object.defineProperty({__proto__:null,execute:j,executeMany:C,supportsCurves:E},Symbol.toStringTag,{value:"Module"}));export{J as i,K as s};
