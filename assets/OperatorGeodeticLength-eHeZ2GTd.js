import{gb as p,g6 as S,gQ as E,g2 as x,hC as G,g7 as P,gd as v,gv as w,gV as T,hD as C,hE as b,gU as D,hF as L,gx as X,ha as Y,hb as j,gz as q}from"./index-CtmyMuv4.js";import{w as I}from"./OperatorShapePreservingLength-uXDUQlC_.js";class k{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,r,i){return!1}canAccelerateGeometry(t){return!1}execute(t,r,i,s){if(i===4)return new I().execute(t,r,s);if(r.getCoordinateSystemType()===0&&p(""),S(t),t.isEmpty()||t.getDimension()<1)return 0;const o=r.getGCS(),n=E();o.querySpheroidData(n);const c=n.majorSemiAxis,u=n.e2,l=o.getUnit().getUnitToBaseFactor();let e;const a=t.getGeometryType();if(a===x.enumPolygon?e=t.getBoundary():a===x.enumEnvelope?e=G(t):P(a)?(e=new v({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new w().execute(e,0,r.getTolerance(0),0,s)),o!==r){const g=r.getSRToGCSTransform();if(r.isPannable()){e=T(e,r),a===x.enumPolyline&&e===t&&(e=t.clone());const d=new C;r.getPannableExtent().queryIntervalX(d);for(let m=0,f=e.getPointCount();m<f;m++){const h=e.getXY(m);h.x=b(h.x,d),e.setXY(m,h)}}const y=e.createInstance();e=L(g,e,y,s)?y:new D().execute(e,g,s)}return this._ExecuteMultiPathGeodeticLength(e,i,c,u,l)}_ExecuteMultiPathGeodeticLength(t,r,i,s,o){const n={stack:[],error:void 0,hasError:!1};try{const c=X(n,new Y,!1);let u=0;const l=t.querySegmentIterator();for(;l.nextPath();)for(;l.hasNextSegment();){const e=l.nextSegment(),a=e.getStartXY(),g=e.getEndXY();a.scale(o),g.scale(o),j.geodeticDistance(i,s,a.x,a.y,g.x,g.y,c,null,null,r),u+=c.val}return u}catch(c){n.error=c,n.hasError=!0}finally{q(n)}}}export{k as OperatorGeodeticLength};
