import{fY as h,fZ as S}from"./index-_f-whK0a.js";import{P as G,j as P,a as p,f as E,d as v}from"./Transformation2D-B_tst7So.js";import{w}from"./OperatorShapePreservingLength-pJOtrMPw.js";import{G as T,a4 as L,N as C,o as X,p as Y,a5 as D,m as N,a6 as b,K as j,L as q}from"./ProjectionTransformation-DOPKWqy2.js";import"./SimpleGeometryCursor-B92kdZ15.js";class U{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(t,r,l){return!1}canAccelerateGeometry(t){return!1}execute(t,r,l,o){if(l===4)return new w().execute(t,r,o);if(r.getCoordinateSystemType()===0&&G(""),P(t),t.isEmpty()||t.getDimension()<1)return 0;const s=r.getGCS(),n=T();s.querySpheroidData(n);const c=n.majorSemiAxis,m=n.e2,u=s.getUnit().getUnitToBaseFactor();let e;const a=t.getGeometryType();if(a===p.enumPolygon?e=t.getBoundary():a===p.enumEnvelope?e=L(t):E(a)?(e=new C({vd:t.getDescription()}),e.addSegment(t,!0)):e=t,e.hasNonLinearSegments()&&(e=new X().execute(e,0,r.getTolerance(0),0,o)),s!==r){const i=r.getSRToGCSTransform();if(r.isPannable()){e=Y(e,r),a===p.enumPolyline&&e===t&&(e=t.clone());const y=new v;r.getPannableExtent().queryIntervalX(y);for(let g=0,d=e.getPointCount();g<d;g++){const f=e.getXY(g);f.x=D(f.x,y),e.setXY(g,f)}}const x=e.createInstance();e=b(i,e,x,o)?x:new N().execute(e,i,o)}return this._ExecuteMultiPathGeodeticLength(e,l,c,m,u)}_ExecuteMultiPathGeodeticLength(t,r,l,o,s){const n={stack:[],error:void 0,hasError:!1};try{const c=h(n,new j,!1);let m=0;const u=t.querySegmentIterator();for(;u.nextPath();)for(;u.hasNextSegment();){const e=u.nextSegment(),a=e.getStartXY(),i=e.getEndXY();a.scale(s),i.scale(s),q.geodeticDistance(l,o,a.x,a.y,i.x,i.y,c,null,null,r),m+=c.val}return m}catch(c){n.error=c,n.hasError=!0}finally{S(n)}}}export{U as OperatorGeodeticLength};
