import{P as b,bh as p,eo as g,es as N,et as A}from"./index-Bf8pDHYn.js";class m{constructor(s,r,t){this.assetName=s,this.assetMimeType=r,this.parts=t}equals(s){return this===s||this.assetName===s.assetName&&this.assetMimeType===s.assetMimeType&&g(this.parts,s.parts,(r,t)=>r.equals(t))}isOnService(s){return this.parts.every(r=>r.isOnService(s))}makeHash(){let s="";for(const r of this.parts)s+=r.partHash;return s}async toBlob(s){const{parts:r}=this;if(r.length===1)return r[0].toBlob(s);const t=await Promise.all(r.map(n=>n.toBlob(s)));return p(s),new Blob(t)}}class B{constructor(s,r){this.partUrl=s,this.partHash=r}equals(s){return this===s||this.partUrl===s.partUrl&&this.partHash===s.partHash}isOnService(s){return this.partUrl.startsWith(`${s.path}/assets/`)}async toBlob(s){const{data:r}=await b(this.partUrl,{responseType:"blob"});return p(s),r}}function H(e){return v(e==null?void 0:e.source)}function u(e){return Array.isArray(e)?e.every(s=>s instanceof m):!1}const c=/^(model\/gltf\+json)|(model\/gltf-binary)$/,f=/\.(gltf|glb)/i;function v(e){return e?Array.isArray(e)?e.some(l):l(e):!1}function l(e){if(e instanceof File){const{type:s,name:r}=e;return c.test(s)||f.test(r)}return c.test(e.assetMimeType)||f.test(e.assetName)}function M(e,s){if(!e)return!1;const{source:r}=e;return $(r,s)}function U(e,s){if(e===s)return!0;const{source:r}=e,{source:t}=s;if(r===t)return!0;if(u(r)&&u(t)){if(r.length!==t.length)return!1;const n=(a,o)=>a.assetName<o.assetName?-1:a.assetName>o.assetName?1:0,i=[...r].sort(n),y=[...t].sort(n);for(let a=0;a<i.length;++a)if(!i[a].equals(y[a]))return!1;return!0}return!1}function $(e,s){if(Array.isArray(e)){const r=e;return r.length>0&&r.every(t=>h(t,s))}return h(e,s)}function h(e,s){return e instanceof m&&e.isOnService(s)}function q(e,s){return e instanceof File?N(e,s):A(e.assetMimeType,e.assetName,s)}function O(e){return Array.isArray(e)?e:[e]}function S(e){return!!e.original}export{S as A,O as N,m as a,q as b,U as h,B as i,M as m,H as o};
